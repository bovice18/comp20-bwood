<!DOCTYPE html>

<html>

<head>
<title>Friends of Ming Chow Jobs Listing</title>
<script>
	var request = new XMLHttpRequest();
	function init() {
        // Set up the request
		try{
			request.open("GET", "http://messagehub.herokuapp.com/lab8.json", true);
		}
		catch (error) {
		
		}
        // Execute the request
        request.send(null);

        // Handle the request (however you want)
        request.onreadystatechange = function() 
		{
			if(request.readyState == 4 && request.status == 200)
			{
				parse(JSON.parse(request.responseText));
			}
		}
    }
	
	function parse(obj) {
		element = document.getElementById("list");
		var count = 0;
		for ( property in obj )          // should return 2
		{
			if(obj.hasOwnProperty(property))
			{
				count++;
			}
		}
		console.log(count);
		list1 = document.createElement("ul");	
		li11 = document.createElement("li");
		li12 = document.createElement("li");
		li13 = document.createElement("li");

		company1 = document.createTextNode("Company: " + obj[0].company);
		li11.appendChild(company1);
		
		location1 = document.createTextNode("Location: " + obj[0].location);
		li12.appendChild(location1);	
		position1 = document.createTextNode("Position: " + obj[0].position);
		li13.appendChild(position1);		
		list1.appendChild(li11); list1.appendChild(li12); list1.appendChild(li13);
		
		list2 = document.createElement("ul");	
		li21 = document.createElement("li");
		li22 = document.createElement("li");
		li23 = document.createElement("li");

		company2 = document.createTextNode("Company: " + obj[1].company);
		li21.appendChild(company2);
		location2 = document.createTextNode("Location: " + obj[1].location);
		li22.appendChild(location2);	
		position2 = document.createTextNode("Position: " + obj[1].position);
		li23.appendChild(position2);		
		list2.appendChild(li21); list2.appendChild(li22); list2.appendChild(li23);
		
		list3 = document.createElement("ul");	
		li31 = document.createElement("li");
		li32 = document.createElement("li");
		li33 = document.createElement("li");

		company3 = document.createTextNode("Company: " + obj[2].company);
		li31.appendChild(company3);
		location3 = document.createTextNode("Location: " + obj[2].location);
		li32.appendChild(location3);	
		position3 = document.createTextNode("Position: " + obj[2].position);
		li33.appendChild(position3);		
		list3.appendChild(li31); list3.appendChild(li32); list3.appendChild(li33);
			
		
		element.appendChild(list1);	
		element.appendChild(list2);
		element.appendChild(list3);
	} 
</script>
</head>

<body onload = "init()">
<div id="list"></div>

</body>

</html>